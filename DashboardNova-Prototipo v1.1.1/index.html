<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dashboard - Home</title>
    <link rel="stylesheet" href="dashboard.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
</head>

<body>
    <nav class="menuLateral">
        <div class="btn-expandir">
            <i class="bi bi-list" id="btn-exp"></i>
        </div>

        <ul>
            <li class="item-menu ativo">
                <a href="#">
                    <span class="icon"><i class="bi bi-house-door-fill"></i></span>
                    <span class="txt-link">Home</span>
                </a>
            </li>
            <li class="item-menu">
                <a href="historico.html">
                    <span class="icon"><i class="bi bi-archive"></i></span>
                    <span class="txt-link">Histórico</span>
                </a>
            </li>
            <li class="item-menu" id="link_usuario">
                <a href="#">
                    <span class="icon"><i class="bi bi-person-square"></i></i></span>
                    <span class="txt-link">Usuario</span>
                </a>
            </li>
        </ul>
    </nav>

    <div class="containerGeral">
        <div class="empurradora">

        </div>
        <div class="containerKPI">
            <div class="KPI">
                <h3>Ambientes em alerta:<br></h3>
                <span>3/5<br></span>
                <span style="color: red;">60%</span>
            </div>
            <div class="KPI">
                <h3>Conjunto Sensores em alerta:</h3>
                <span>5/8<br></span>
                <span style="color: red;">62.5%</span>
            </div>
            <div class="KPI">
                <h3>Alertas nas últimas 2 horas:<br></h3>
                <span style="color: red;">6<br></span>
            </div>
        </div>

        <div class="containerKPI">
            <div class="KPI">
                <h3>Último alerta gerado:</h3>
                <span style="color: red;">Ambiente 2</span>
            </div>
            <div class="KPI">
                <h3>Temperatura mais alta:</h3>
                <span style="color: red;">31°C<br></span>
            </div>
            <div class="KPI">
                <h3>Umidade mais alta:</h3>
                <span style="color: red;">74%<br></span>
            </div>
        </div>

        <dialog id="amb1" class="modalAMB">
            <div class="contAmb">
                <div class="ambNome">
                    <h1> Ambiente 1</h1>
                </div>

                <div class="modalButAMB">
                    <button onclick="cs11()">Conjunto-Sensor 1</button>
                    <button onclick="cs21()">Conjunto-Sensor 2</button>
                </div>

                <div class="modalButFECHAR">
                    <button onclick="fecharAMB()">Fechar</button>
                </div>
            </div>
        </dialog>

        <dialog id="amb2" class="modalAMB">
            <div class="contAmb">
                <div class="ambNome">
                    <h1> Ambiente 2</h1>
                </div>

                <div class="modalButAMB">
                    <button onclick="cs12()">Conjunto-Sensor 1</button>
                    <button onclick="cs22()">Conjunto-Sensor 2</button>
                </div>

                <div class="modalButFECHAR">
                    <button onclick="fecharAMB()">Fechar</button>
                </div>
            </div>
        </dialog>

        <dialog id="amb3" class="modalAMB">
            <div class="contAmb">
                <div class="ambNome">
                    <h1> Ambiente 3</h1>
                </div>

                <div class="modalButAMB">
                    <button onclick="cs13()">Conjunto-Sensor 1</button>
                </div>

                <div class="modalButFECHAR">
                    <button onclick="fecharAMB()">Fechar</button>
                </div>
            </div>
        </dialog>

        <dialog id="amb4" class="modalAMB">
            <div class="contAmb">
                <div class="ambNome">
                    <h1> Ambiente 4</h1>
                </div>

                <div class="modalButAMB">
                    <button onclick="cs14()">Conjunto-Sensor 1</button>
                    <button onclick="cs24()">Conjunto-Sensor 2</button>
                </div>

                <div class="modalButFECHAR">
                    <button onclick="fecharAMB()">Fechar</button>
                </div>
            </div>
        </dialog>

        <dialog id="amb5" class="modalAMB">
            <div class="contAmb">
                <div class="ambNome">
                    <h1> Ambiente 5</h1>
                </div>

                <div class="modalButAMB">
                    <button onclick="cs15()">Conjunto-Sensor 1</button>
                </div>

                <div class="modalButFECHAR">
                    <button onclick="fecharAMB()">Fechar</button>
                </div>
            </div>
        </dialog>

        <dialog id="dialog" class="dialogUser" close>
            <div class="contModal">
                <div class="nomeModal">
                    <h1>Nome-User</h1>
                    <span class="icon"><i class="bi bi-person-circle"></i></span>
                </div>

                <div class="modalBut">
                    <button>Desconectar</button>
                    <button id="cancel">Fechar</button>
                </div>
            </div>
        </dialog>

        <div class="containerLista">
            <div class="listaAmbientes">
                <button onclick="but1()">AMB1</button>
                <button onclick="but2()">AMB2</button>
                <button onclick="but3()">AMB3</button>
                <button onclick="but4()">AMB4</button>
                <button onclick="but5()">AMB5</button>
            </div>
        </div>

        <div class="containerTermometro">
            <span>Legenda de Alertas:</span>
            <div class="Termometro">
                <div id="T1" class="T1">>=30°C</div>
                <div id="T2" class="T2">>=26°C</div>
                <div id="T3" class="T3">
                    <div id="G1" class="G1">25°C</div>
                    <div id="G2" class="G2">24°C</div>
                    <div id="G3" class="G3">23°C</div>
                    <div id="G4" class="G4">22°C</div>
                    <div id="G5" class="G5">20°C</div>
                    <div id="G6" class="G6">19°C</div>
                    18°C
                </div>
                <div id="T4" class="T4">
                    <=18°C </div>
                        <div id="T5" class="T5">
                            <=15°C </div>
                        </div>
                </div>
            </div>
        </div>

        <dialog id="dialogCS" class="modalCS">
            <div class="contCS">
                <div id="csNome">

                </div>

                <div class="conteudoCS">
                    <canvas id="csChart" class="csChart" style="height: 500px; width: 680px;">
                        asdasd
                    </canvas>

                    <div id="contKPIcs">
                        <div class="KPIcs">
                            <h3>Último alerta gerado:</h3>
                            <span style="color: red;">Ambiente 2</span>
                        </div>
                        <div class="KPIcs">
                            <h3>Temperatura mais alta:</h3>
                            <span style="color: red;">31°C<br></span>
                        </div>
                        <div class="KPIcs">
                            <h3>Umidade mais alta:</h3>
                            <span style="color: red;">74%<br></span>
                        </div>
                    </div>
                </div>
            </div>
        </dialog>
</body>

</html>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>

    //Botao mudar de cor quando selecionado
    var menuItem = document.querySelectorAll('.item-menu')

    function selectLink() {
        menuItem.forEach((item) =>
            item.classList.remove('ativo')
        )
        this.classList.add('ativo')
        if (usuario.classList.contains('ativo')) {
            modalUsuario()
        } else {
            dialog.close();
        }
    }

    menuItem.forEach((item) =>
        item.addEventListener('click', selectLink)
    )

    //Expandir o menu

    var btnExp = document.querySelector('#btn-exp')
    var menuLat = document.querySelector('.menuLateral')
    var empurrar = document.querySelector('.empurradora')

    btnExp.addEventListener('click', function () {
        menuLat.classList.toggle('expandir')
        empurrar.classList.toggle('aparecer')
    })

    // modal Usuario
    usuario = document.getElementById('link_usuario')

    function modalUsuario() {
        dialog.showModal();

        cancel.addEventListener('click', () => {
            dialog.close();
        })
    }

    // modal Ambientes
    let amb1 = document.getElementById('amb1')
    let amb2 = document.getElementById('amb2')
    let amb3 = document.getElementById('amb3')
    let amb4 = document.getElementById('amb4')
    let amb5 = document.getElementById('amb5')

    function but1() {
        amb1.showModal();
    }

    function but2() {
        amb2.showModal();
    }

    function but3() {
        amb3.showModal();
    }

    function but4() {
        amb4.showModal();
    }

    function but5() {
        amb5.showModal();
    }

    function fecharAMB() {
        amb1.close();
        amb2.close();
        amb3.close();
        amb4.close();
        amb5.close();
    }

    let nomeCS = "Sensor 1"

    
    function cs11() {
        fecharAMB();
        const ctx = document.getElementById('csChart');
        nomeCS = "Sensor 1"
        dialogCS.showModal();
        csNome.innerHTML = `<h1>${nomeCS}</h1>`
        new Chart(ctx, {
            type: 'bar',
            data: {
                labels: ['Red', 'Blue', 'Yellow', 'Green', 'Purple', 'Orange'],
                datasets: [{
                    label: '# of Votes',
                    data: [12, 19, 3, 5, 2, 3],
                    borderWidth: 1
                }]
            },
            options: {
                scales: {
                    y: {
                        beginAtZero: true
                    }
                }
            }
        });
    }

    function cs21() {
        fecharAMB();
        const ctx21 = document.getElementById('csChart');
        dialogCS.showModal();
        nomeCS = "Sensor 2"
        csNome.innerHTML = `<h1>${nomeCS}</h1>`
        new Chart(ctx21, {
            type: 'bar',
            data: {
                labels: ['Red', 'dife', 'rente', 'Green', 'Purple', 'Orange'],
                datasets: [{
                    label: '# of Votes',
                    data: [12, 19, 3, 5, 2, 3],
                    borderWidth: 1
                }]
            },
            options: {
                scales: {
                    y: {
                        beginAtZero: true
                    }
                }
            }
        });
    }

    function cs12() {
        fecharAMB();
        const ctx = document.getElementById('csChart');
        dialogCS.showModal();
        nomeCS = "Sensor 1"
        csNome.innerHTML = `<h1>${nomeCS}</h1>`
        //AQUI VAI O CHART COM OS DADOS DO GRAFICO 2
    }

    function cs22() {
        fecharAMB();
        const ctx = document.getElementById('csChart');
        dialogCS.showModal();
        nomeCS = "Sensor 2"
        csNome.innerHTML = `<h1>${nomeCS}</h1>`
        //AQUI VAI O CHART COM OS DADOS DO GRAFICO 2
    }

    function cs13() {
        fecharAMB();
        const ctx = document.getElementById('csChart');
        dialogCS.showModal();
        nomeCS = "Sensor 1"
        csNome.innerHTML = `<h1>${nomeCS}</h1>`
        //AQUI VAI O CHART COM OS DADOS DO GRAFICO 2
    }

    function cs14() {
        fecharAMB();
        const ctx = document.getElementById('csChart');
        dialogCS.showModal();
        nomeCS = "Sensor 1"
        csNome.innerHTML = `<h1>${nomeCS}</h1>`
        //AQUI VAI O CHART COM OS DADOS DO GRAFICO 2
    }

    function cs24() {
        fecharAMB();
        const ctx = document.getElementById('csChart');
        dialogCS.showModal();
        nomeCS = "Sensor 2"
        csNome.innerHTML = `<h1>${nomeCS}</h1>`
        //AQUI VAI O CHART COM OS DADOS DO GRAFICO 2
    }

    function cs15() {
        fecharAMB();
        const ctx = document.getElementById('csChart');
        dialogCS.showModal();
        nomeCS = "Sensor 1"
        csNome.innerHTML = `<h1>${nomeCS}</h1>`
        //AQUI VAI O CHART COM OS DADOS DO GRAFICO 2
    }
</script>